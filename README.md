# dday_mvt
==========

Одна из тех возможностей, которая в скором времени будет
доступна в публичных инстансах - это возможность использования
NextGIS Web в качестве сервера векторных тайлов (Mapbox Vector Tile).


Предпосылки
-----------

При разработке [портала](http://opendata25.primorsky.ru/ckan/)
открытых данных Приморского края была необходимость отображать
векторные слои с большим количеством объектов. В этом случае возникает
проблема, связанная с тем, что если мы хотим полностью передать
слой на клиента, то это занимает слишком много времени
(размеры данных достигают сотни Мегабайт). В качестве решения
был опробован механизм векторных тайлов. В нашем случае тайлы
генерируются по запросу и сохраняются в кэше веб сервера.


Преимущества
------------

* Рендеринг на клиенте - позволяет управлять внешним видом данных
  на устройстве конечного пользователя (изменять оформление,
  переключать язык подписей и т.д.)

* Нет необходимости загружать весь слой целиком, загружаются только
  тайлы, попадающие в текущий охват. При формировании тайлов
  используется упрощение геометрий в зависимости от масштабного уровня.

* Клиент получает доступ к атрибутике и геометриям, что позволяет
  делать интерактивные карты.


Библиотеки
----------

* Leaflet (с помощью плагина Leaflet.MapboxVectorTile)
* OpenLayers 3


Демонстрация
------------

1. Возможность определять символику на клиенте (в Leaflet установлены
   одни цвета, в OpenLayers 3 - другие).

2. Интерактивные возможности (на примере Leaflet). Подсветка объектов
   (даже в том случае, если объект попадает на разные тайлы).
   Окно с результатами идентификации.

3. Обозначение проблемы, связанной с отображением точечных данных.
   Решение - отступы для тайлов.

4. Демонстрация запросов к тайлам в NGW из консоли браузера
   при зуме карты.
